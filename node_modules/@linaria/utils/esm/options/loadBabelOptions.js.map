{"version":3,"file":"loadBabelOptions.js","names":["babel","cache","WeakMap","empty","loadBabelOptions","filename","overrides","fileCache","get","Map","has","babelOptions","loadOptions","caller","name","set"],"sources":["../../src/options/loadBabelOptions.ts"],"sourcesContent":["import * as babel from '@babel/core';\nimport type { TransformOptions } from '@babel/core';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, TransformOptions>\n>();\n\nconst empty = {};\n\nexport default function loadBabelOptions(\n  filename: string,\n  overrides: TransformOptions = empty\n) {\n  const fileCache = cache.get(overrides) ?? new Map<string, TransformOptions>();\n  if (fileCache.has(filename)) {\n    return fileCache.get(filename)!;\n  }\n\n  const babelOptions: babel.TransformOptions =\n    babel.loadOptions({\n      ...overrides,\n      filename,\n      caller: { name: 'linaria' },\n    }) ?? {};\n\n  fileCache.set(filename, babelOptions);\n  cache.set(overrides, fileCache);\n\n  return babelOptions;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,aAAvB;AAGA,MAAMC,KAAK,GAAG,IAAIC,OAAJ,EAAd;AAKA,MAAMC,KAAK,GAAG,EAAd;AAEA,eAAe,SAASC,gBAAT,CACbC,QADa,EAEbC,SAA2B,GAAGH,KAFjB,EAGb;EACA,MAAMI,SAAS,GAAGN,KAAK,CAACO,GAAN,CAAUF,SAAV,KAAwB,IAAIG,GAAJ,EAA1C;;EACA,IAAIF,SAAS,CAACG,GAAV,CAAcL,QAAd,CAAJ,EAA6B;IAC3B,OAAOE,SAAS,CAACC,GAAV,CAAcH,QAAd,CAAP;EACD;;EAED,MAAMM,YAAoC,GACxCX,KAAK,CAACY,WAAN,CAAkB,EAChB,GAAGN,SADa;IAEhBD,QAFgB;IAGhBQ,MAAM,EAAE;MAAEC,IAAI,EAAE;IAAR;EAHQ,CAAlB,KAIM,EALR;EAOAP,SAAS,CAACQ,GAAV,CAAcV,QAAd,EAAwBM,YAAxB;EACAV,KAAK,CAACc,GAAN,CAAUT,SAAV,EAAqBC,SAArB;EAEA,OAAOI,YAAP;AACD"}