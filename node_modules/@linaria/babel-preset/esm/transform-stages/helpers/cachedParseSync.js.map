{"version":3,"file":"cachedParseSync.js","names":["babel","cache","WeakMap","cachedParseSync","code","babelOptions","fileCache","get","Map","has","file","parseSync","set"],"sources":["../../../src/transform-stages/helpers/cachedParseSync.ts"],"sourcesContent":["import * as babel from '@babel/core';\nimport type { ParseResult, TransformOptions } from '@babel/core';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, ParseResult>\n>();\n\nexport default function cachedParseSync(\n  code: string,\n  babelOptions: TransformOptions\n): ParseResult {\n  const fileCache = cache.get(babelOptions) ?? new Map<string, ParseResult>();\n  if (fileCache.has(code)) {\n    return fileCache.get(code)!;\n  }\n\n  const file = babel.parseSync(code, babelOptions)!;\n\n  fileCache.set(code, file);\n  cache.set(babelOptions, fileCache);\n\n  return file;\n}\n"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,aAAvB;AAGA,MAAMC,KAAK,GAAG,IAAIC,OAAJ,EAAd;AAKA,eAAe,SAASC,eAAT,CACbC,IADa,EAEbC,YAFa,EAGA;EACb,MAAMC,SAAS,GAAGL,KAAK,CAACM,GAAN,CAAUF,YAAV,KAA2B,IAAIG,GAAJ,EAA7C;;EACA,IAAIF,SAAS,CAACG,GAAV,CAAcL,IAAd,CAAJ,EAAyB;IACvB,OAAOE,SAAS,CAACC,GAAV,CAAcH,IAAd,CAAP;EACD;;EAED,MAAMM,IAAI,GAAGV,KAAK,CAACW,SAAN,CAAgBP,IAAhB,EAAsBC,YAAtB,CAAb;EAEAC,SAAS,CAACM,GAAV,CAAcR,IAAd,EAAoBM,IAApB;EACAT,KAAK,CAACW,GAAN,CAAUP,YAAV,EAAwBC,SAAxB;EAEA,OAAOI,IAAP;AACD"}