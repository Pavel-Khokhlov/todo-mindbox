{"version":3,"file":"cachedParseSync.js","names":["cache","WeakMap","cachedParseSync","code","babelOptions","fileCache","get","Map","has","file","babel","parseSync","set"],"sources":["../../../src/transform-stages/helpers/cachedParseSync.ts"],"sourcesContent":["import * as babel from '@babel/core';\nimport type { ParseResult, TransformOptions } from '@babel/core';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, ParseResult>\n>();\n\nexport default function cachedParseSync(\n  code: string,\n  babelOptions: TransformOptions\n): ParseResult {\n  const fileCache = cache.get(babelOptions) ?? new Map<string, ParseResult>();\n  if (fileCache.has(code)) {\n    return fileCache.get(code)!;\n  }\n\n  const file = babel.parseSync(code, babelOptions)!;\n\n  fileCache.set(code, file);\n  cache.set(babelOptions, fileCache);\n\n  return file;\n}\n"],"mappings":";;;;;;;AAAA;;;;;;AAGA,MAAMA,KAAK,GAAG,IAAIC,OAAJ,EAAd;;AAKe,SAASC,eAAT,CACbC,IADa,EAEbC,YAFa,EAGA;EAAA;;EACb,MAAMC,SAAS,iBAAGL,KAAK,CAACM,GAAN,CAAUF,YAAV,CAAH,mDAA8B,IAAIG,GAAJ,EAA7C;;EACA,IAAIF,SAAS,CAACG,GAAV,CAAcL,IAAd,CAAJ,EAAyB;IACvB,OAAOE,SAAS,CAACC,GAAV,CAAcH,IAAd,CAAP;EACD;;EAED,MAAMM,IAAI,GAAGC,KAAK,CAACC,SAAN,CAAgBR,IAAhB,EAAsBC,YAAtB,CAAb;EAEAC,SAAS,CAACO,GAAV,CAAcT,IAAd,EAAoBM,IAApB;EACAT,KAAK,CAACY,GAAN,CAAUR,YAAV,EAAwBC,SAAxB;EAEA,OAAOI,IAAP;AACD"}