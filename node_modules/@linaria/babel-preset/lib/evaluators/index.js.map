{"version":3,"file":"index.js","names":["evaluate","resolveCache","codeCache","evalCache","code","options","filename","pluginOptions","loadLinariaOptions","m","Module","dependencies","value","exports","processors","tagProcessors"],"sources":["../../src/evaluators/index.ts"],"sourcesContent":["/**\n * This file is an entry point for module evaluation for getting lazy dependencies.\n */\n\nimport Module from '../module';\nimport loadLinariaOptions from '../transform-stages/helpers/loadLinariaOptions';\nimport type { Options, CodeCache } from '../types';\n\nexport default function evaluate(\n  resolveCache: Map<string, string>,\n  codeCache: CodeCache,\n  evalCache: Map<string, Module>,\n  code: string[],\n  options: Pick<Options, 'filename' | 'pluginOptions'>\n) {\n  const filename = options?.filename ?? 'unknown';\n  const pluginOptions = loadLinariaOptions(options.pluginOptions);\n\n  const m = new Module(\n    filename ?? 'unknown',\n    pluginOptions,\n    resolveCache,\n    codeCache,\n    evalCache\n  );\n\n  m.dependencies = [];\n  m.evaluate(code);\n\n  return {\n    value: m.exports,\n    dependencies: m.dependencies,\n    processors: m.tagProcessors,\n  };\n}\n"],"mappings":";;;;;;;AAIA;;AACA;;;;AALA;AACA;AACA;AAMe,SAASA,QAAT,CACbC,YADa,EAEbC,SAFa,EAGbC,SAHa,EAIbC,IAJa,EAKbC,OALa,EAMb;EAAA;;EACA,MAAMC,QAAQ,wBAAGD,OAAH,aAAGA,OAAH,uBAAGA,OAAO,CAAEC,QAAZ,iEAAwB,SAAtC;EACA,MAAMC,aAAa,GAAG,IAAAC,2BAAA,EAAmBH,OAAO,CAACE,aAA3B,CAAtB;EAEA,MAAME,CAAC,GAAG,IAAIC,eAAJ,CACRJ,QADQ,aACRA,QADQ,cACRA,QADQ,GACI,SADJ,EAERC,aAFQ,EAGRN,YAHQ,EAIRC,SAJQ,EAKRC,SALQ,CAAV;EAQAM,CAAC,CAACE,YAAF,GAAiB,EAAjB;EACAF,CAAC,CAACT,QAAF,CAAWI,IAAX;EAEA,OAAO;IACLQ,KAAK,EAAEH,CAAC,CAACI,OADJ;IAELF,YAAY,EAAEF,CAAC,CAACE,YAFX;IAGLG,UAAU,EAAEL,CAAC,CAACM;EAHT,CAAP;AAKD"}