{"version":3,"file":"validateParams.js","names":["isValidParams","params","constraints","i","length","constraint","undefined","Array","isArray","every","c","validateParams","message","Error"],"sources":["../../src/utils/validateParams.ts"],"sourcesContent":["import type { Param, Params } from '../types';\n\ntype ParamName = Param[0];\ntype ParamConstraint = ParamName | [...ParamName[]] | '*';\n\nexport type ParamConstraints =\n  | [...ParamConstraint[]]\n  | [...ParamConstraint[], '...'];\n\ntype GetParamByName<T> = T extends '*'\n  ? Param\n  : T extends (infer TNames extends ParamName)[]\n  ? Extract<Param, readonly [TNames, ...unknown[]]>\n  : T extends ParamName\n  ? Extract<Param, readonly [T, ...unknown[]]>\n  : never;\n\nexport type MapParams<\n  TNames extends ParamConstraints,\n  TRes extends Param[] = []\n> = TNames extends [infer THead, ...infer TTail extends ParamConstraints]\n  ? THead extends '...'\n    ? [...TRes, ...Params]\n    : MapParams<TTail, [...TRes, GetParamByName<THead>]>\n  : TRes;\n\nexport function isValidParams<T extends ParamConstraints>(\n  params: Params,\n  constraints: T\n): params is MapParams<T> {\n  for (let i = 0; i < constraints.length; i++) {\n    const constraint = constraints[i];\n    if (constraint === '...') {\n      return true;\n    }\n\n    if (constraint === '*') {\n      if (params[i] === undefined) {\n        return false;\n      }\n    } else if (Array.isArray(constraint)) {\n      if (constraint.every((c) => c !== params[i]?.[0])) {\n        return false;\n      }\n    } else if (constraint !== params[i]?.[0]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function validateParams<T extends ParamConstraints>(\n  params: Params,\n  constraints: T,\n  message: string\n): asserts params is MapParams<T> {\n  if (!isValidParams(params, constraints)) {\n    throw new Error(message);\n  }\n}\n"],"mappings":"AA0BA,OAAO,SAASA,aAAT,CACLC,MADK,EAELC,WAFK,EAGmB;EACxB,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,WAAW,CAACE,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;IAC3C,MAAME,UAAU,GAAGH,WAAW,CAACC,CAAD,CAA9B;;IACA,IAAIE,UAAU,KAAK,KAAnB,EAA0B;MACxB,OAAO,IAAP;IACD;;IAED,IAAIA,UAAU,KAAK,GAAnB,EAAwB;MACtB,IAAIJ,MAAM,CAACE,CAAD,CAAN,KAAcG,SAAlB,EAA6B;QAC3B,OAAO,KAAP;MACD;IACF,CAJD,MAIO,IAAIC,KAAK,CAACC,OAAN,CAAcH,UAAd,CAAJ,EAA+B;MACpC,IAAIA,UAAU,CAACI,KAAX,CAAkBC,CAAD,IAAOA,CAAC,KAAKT,MAAM,CAACE,CAAD,CAAN,GAAY,CAAZ,CAA9B,CAAJ,EAAmD;QACjD,OAAO,KAAP;MACD;IACF,CAJM,MAIA,IAAIE,UAAU,KAAKJ,MAAM,CAACE,CAAD,CAAN,GAAY,CAAZ,CAAnB,EAAmC;MACxC,OAAO,KAAP;IACD;EACF;;EAED,OAAO,IAAP;AACD;AAED,OAAO,SAASQ,cAAT,CACLV,MADK,EAELC,WAFK,EAGLU,OAHK,EAI2B;EAChC,IAAI,CAACZ,aAAa,CAACC,MAAD,EAASC,WAAT,CAAlB,EAAyC;IACvC,MAAM,IAAIW,KAAJ,CAAUD,OAAV,CAAN;EACD;AACF"}